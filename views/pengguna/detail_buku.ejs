<!DOCTYPE html>
<html lang="id">
<head>
    <%- include('../partials/__head.ejs', { title: 'Detail Buku' }) %>
    
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f8f9fa;
        }
        .btn-add {
            background-color: #0F8EC8;
            color: white;
            border: 1px solid #0F8EC8;
        }
        .btn-add:hover {
            background-color: #0c75a4;
            transform: translateY(-2px);
        }
        .detail-header {
            font-weight: 700;
            font-size: 2rem;
            color: #212529;
            margin-bottom: 1.5rem;
        }
        .detail-cover-img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            cursor: pointer;
        }
        .detail-info-item {
            margin-bottom: 1rem;
            display: flex;
        }
        .detail-info-label {
            font-weight: 700;
            color: #495057;
            min-width: 150px;
        }
        .detail-info-value {
            color: #5f6870;
            flex-grow: 1;
            text-align: justify;
        }
        
        .modal {
            display: none; 
            position: fixed; 
            z-index: 1050; 
            padding-top: 100px; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            overflow: auto; 
            background-color: rgba(0,0,0,0.9);
        }

        .modal-content {
            margin: auto;
            display: block;
            width: 90%;
            max-width: 700px;
        }

        #caption {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
            text-align: center;
            color: #ccc;
            padding: 10px 0;
            height: 150px;
        }

        .close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
        }

        .close:hover,
        .close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }

        .modal-content, #caption {  
            -webkit-animation-name: zoom;
            -webkit-animation-duration: 0.6s;
            animation-name: zoom;
            animation-duration: 0.6s;
        }

        @-webkit-keyframes zoom {
            from {-webkit-transform: scale(0)} 
            to {-webkit-transform: scale(1)}
        }

        @keyframes zoom {
            from {transform: scale(0.1)} 
            to {transform: scale(1)}
        }

        @media only screen and (max-width: 700px){
            .modal-content {
                width: 100%;
            }
        }
        @media (max-width: 767.98px) {
            .detail-cover-img {
                max-width: 60%; 
                margin-left: auto;
                margin-right: auto;
                display: block; 
            }
            .col-md-4 {
                text-align: center !important;
            }
        }

    </style>
</head>
<body>
    <div class="container-fluid page-body-wrapper flex flex-grow">
        <div class="container mb-5">
            <a href="javascript:history.back()" class="btn btn-add mb-3">
                <i class="bi bi-arrow-left"></i>
            </a>
            
            <div class="row">
                <div class="col-md-4 text-center mb-4">
                    <a href="#" class="book-cover-trigger" id="book-cover-link"> 
                        <img src="" alt="Cover Buku" class="detail-cover-img" id="book-cover">
                    </a>
                </div>

                <div id="myModal" class="modal">
                    <span class="close" title="Close Modal">&times;</span>
                    <img class="modal-content" id="img01">
                    <div id="caption"></div>
                </div>
                
                <div class="col-md-8">
                    <h1 class="detail-header" id="book-title"></h1>
                    <div class="mb-4">
                        <div class="detail-info-item">
                            <span class="detail-info-label">Pengarang</span>
                            <span class="detail-info-value" id="book-author"></span>
                        </div>
                        <div class="detail-info-item">
                            <span class="detail-info-label">ISBN / ISSN</span>
                            <span class="detail-info-value" id="book-isbn"></span>
                        </div>
                        <div class="detail-info-item">
                            <span class="detail-info-label">No. Klasifikasi</span>
                            <span class="detail-info-value" id="book-classification"></span>
                        </div>
                        <div class="detail-info-item">
                            <span class="detail-info-label">Bahasa</span>
                            <span class="detail-info-value" id="book-language"></span>
                        </div>
                        <div class="detail-info-item">
                            <span class="detail-info-label">Jumlah Halaman</span>
                            <span class="detail-info-value" id="book-pages"></span>
                        </div>
                        <div class="detail-info-item">
                            <span class="detail-info-label">Tahun Terbit</span>
                            <span class="detail-info-value" id="book-year"></span>
                        </div>
                        <div class="detail-info-item">
                            <span class="detail-info-label">Tempat Terbit</span>
                            <span class="detail-info-value" id="book-publication-place"></span>
                        </div>
                        <div class="detail-info-item">
                            <span class="detail-info-label">Penerbit</span>
                            <span class="detail-info-value" id="book-publisher"></span>
                        </div>
                        <div class="detail-info-item">
                            <span class="detail-info-label">Kategori</span>
                            <span class="detail-info-value" id="book-category"></span>
                        </div>
                        <div class="detail-info-item">
                            <span class="detail-info-label">Lokasi</span>
                            <span class="detail-info-value" id="book-location"></span>
                        </div>
                        <div class="detail-info-item">
                            <span class="detail-info-label">Ketersediaan</span>
                            <span class="detail-info-value" id="book-availability"></span>
                        </div>
                        <div class="detail-info-item">
                            <span class="detail-info-label">Sinopsis</span>
                            <span class="detail-info-value" id="book-synopsis"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <%- include('../partials/__foot.ejs') %>

    <script>
        const bookData = {
            cover: "../../images/assets/1757919791539-47227693.webp",
            title: "Bumi Manusia",
            author: "Pramoedya Ananta Toer",
            isbn: "978-9799106280",
            classification: "813.54 PRO b",
            language: "Indonesia",
            pages: "550",
            year: "1980",
            publicationPlace: "Jakarta",
            publisher: "Hasta Mitra",
            category: "Fiksi Sejarah",
            location: "Lantai 1, Ruangan Koleksi Khusus, Rak 4",
            availability: "Tersedia",
            synopsis: "Bumi Manusia adalah novel pertama dari Tetralogi Buru karya Pramoedya Ananta Toer. Novel ini menceritakan kisah Minke, seorang pribumi yang berkesempatan sekolah di HBS, sekolah menengah bergengsi untuk orang-orang Belanda dan Eropa. Di tengah diskriminasi dan ketidakadilan kolonial, Minke berjuang untuk mempertahankan martabatnya dan cintanya pada Annelies, putri Nyai Ontosoroh. Novel ini adalah cerminan perjuangan, cinta, dan identitas di masa kolonial Hindia Belanda."
        };

        function displayBookDetails(data) {
            document.getElementById('book-cover').src = data.cover;
            document.getElementById('book-cover').alt = `Cover Buku ${data.title}`;
            document.getElementById('book-title').textContent = data.title;
            document.getElementById('book-author').textContent = `: ${data.author}`;
            document.getElementById('book-isbn').textContent = `: ${data.isbn}`;
            document.getElementById('book-classification').textContent = `: ${data.classification}`;
            document.getElementById('book-language').textContent = `: ${data.language}`;
            document.getElementById('book-pages').textContent = `: ${data.pages}`;
            document.getElementById('book-year').textContent = `: ${data.year}`;
            document.getElementById('book-publication-place').textContent = `: ${data.publicationPlace}`;
            document.getElementById('book-publisher').textContent = `: ${data.publisher}`;
            document.getElementById('book-category').textContent = `: ${data.category}`;
            document.getElementById('book-location').textContent = `: ${data.location}`;
            document.getElementById('book-availability').textContent = `: ${data.availability}`;
            document.getElementById('book-synopsis').textContent = `: ${data.synopsis}`;
            document.getElementById('book-cover-link').href = data.cover;
        }

        document.addEventListener('DOMContentLoaded', () => {
            displayBookDetails(bookData); 
            
            var modal = document.getElementById("myModal");
            var img = document.getElementById("book-cover");
            var modalImg = document.getElementById("img01");
            var captionText = document.getElementById("caption");
            var link = document.getElementById("book-cover-link");

            link.onclick = function(event){ 
                event.preventDefault(); 
                modal.style.display = "block";
                modalImg.src = img.src; 
                captionText.innerHTML = img.alt; 
            }
            
            var span = document.getElementsByClassName("close")[0];
            span.onclick = function() { 
                modal.style.display = "none";
            }

            // tutup modal saat user klik di luar gambar
            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        });
    </script>
</body>
</html>