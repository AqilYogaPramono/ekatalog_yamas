<%- include('../../../partials/header/__headerDashboard.ejs', { title: 'Detail Buku' }) %>
<%- include('../../../partials/nav-side/__nav-sidePengurus.ejs') %>
<%- include('../../../partials/messages/messagesDashboard.ejs') %>

<div class="main-panel">
    <div class="content-wrapper">
        <div class="row">
            <div class="col-12 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3 mb-3 mb-md-0">
                                <div class="d-flex flex-column align-items-center">
                                    <div class="d-md-none mb-3 w-100">
                                        <div class="btn-actions-mobile d-flex gap-2 justify-content-center">
                                            <a href="/pustakawan/buku" class="btn btn-light btn-sm" data-loading>Kembali</a>
                                            <a href="/pustakawan/buku/edit/<%= buku && buku.id %>" class="btn btn-outline-info btn-sm" data-loading>Edit</a>
                                            <button type="button" class="btn btn-outline-danger btn-sm btn-delete" data-url="/pustakawan/buku/delete/<%= buku && buku.id %>">Hapus</button>
                                        </div>
                                    </div>
                                    <img id="detailCover" class="img-click-preview" data-src="<%= buku && buku.foto_cover ? ('/images/buku/' + buku.foto_cover) : '/images/no-image.png' %>" src="<%= buku && buku.foto_cover ? ('/images/buku/' + buku.foto_cover) : '/images/no-image.png' %>" alt="cover" style="width:100%; max-width:220px; border-radius:12px; object-fit:cover;cursor:zoom-in;box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                                </div>
                            </div>
                            <div class="col-md-9">
                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <h4 class="card-title mb-0"><%= (buku && buku.judul) ? buku.judul : '-' %></h4>
                                    <div class="btn-actions d-none d-md-flex">
                                        <a href="/pustakawan/buku" class="btn btn-light btn-sm" data-loading>Kembali</a>
                                        <a href="/pustakawan/buku/edit/<%= buku && buku.id %>" class="btn btn-outline-info btn-sm" data-loading>Edit</a>
                                        <button type="button" class="btn btn-outline-danger btn-sm btn-delete" data-url="/pustakawan/buku/delete/<%= buku && buku.id %>">Hapus</button>
                                    </div>
                                </div>
                                <div class="detail-info">
                                    <div class="info-item">
                                        <span class="info-label">ISBN/ISSN: <%= (buku && buku.isbn_issn) ? buku.isbn_issn : 'Tidak Tersedia' %></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Nomor Klasifikasi: <%= (buku && buku.no_klasifikasi) ? buku.no_klasifikasi : '-' %></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Bahasa: <%= (buku && buku.bahasa) ? buku.bahasa : '-' %></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Tahun Terbit: <%= (buku && buku.tahun_terbit) ? buku.tahun_terbit : '-' %></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Total Halaman: <%= (buku && buku.jumlah_halaman) ? buku.jumlah_halaman : '-' %></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Sinopsis: <%= (buku && buku.sinopsis) ? buku.sinopsis : '-' %></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Ketersediaan: <%= (buku && buku.ketersediaan) ? buku.ketersediaan : '-' %></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Kode Lantai: <%= (buku && buku.kode_lantai) ? buku.kode_lantai : '-' %></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Kode Ruangan: <%= (buku && buku.kode_ruangan) ? buku.kode_ruangan : '-' %></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Kode Rak: <%= (buku && buku.kode_rak) ? buku.kode_rak : '-' %></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Dibuat Pada: <%= (buku && buku.dibuat_pada) ? new Date(buku.dibuat_pada).toLocaleString('id-ID') : 'Tidak Tersedia' %></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Diubah Pada: <%= (buku && buku.diubah_pada) ? new Date(buku.diubah_pada).toLocaleString('id-ID') : 'Belum Pernah Diubah' %></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Dibuat Oleh: <%= (buku && buku.dibuat_oleh) ? buku.dibuat_oleh : 'Tidak Diketahui' %></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Diubah Oleh: <%= (buku && buku.diubah_oleh) ? buku.diubah_oleh : 'Belum Pernah Diubah' %></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade modal-below-navbar modal-top" id="globalImagePreviewModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Pratinjau Gambar</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body p-0">
                <img id="globalImagePreviewEl" src="" alt="preview" style="width:100%;height:auto;display:block;">
            </div>
        </div>
    </div>
</div>

<div class="modal fade modal-below-navbar" id="modalConfirmDelete" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Konfirmasi Hapus</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Apakah Anda yakin ingin menghapus buku "<%= (buku && buku.judul) ? buku.judul : 'ini' %>"?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-dismiss="modal">Batal</button>
                <button type="button" class="btn btn-danger" id="btnConfirmDelete">Hapus</button>
            </div>
        </div>
    </div>
</div>

<%- include('../../../partials/script/__scriptDashboard.ejs') %>